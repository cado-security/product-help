---
title: Deploying
hide_title: true
sidebar_position: 2
---

# Deploying Cado Host

You can execute Cado Host individually on a device or you can deploy it to a number of machines that may be compromised, for example through **[Group Policy](https://support.microsoft.com/en-gb/help/816102/how-to-use-group-policy-to-remotely-install-software-in-windows-server)** or other systems management software.

## Deploy through Cado Response Platform
In order to deploy Cado Host, you can choose from one of the following deployment methods:
1. Use the **Script Builder** from within the Cado Response Platform.  This allows you to build a script which can be run on any supported device, upload the triage artifacts to cloud storage and automatically process the data into Cado Response.
2. Use the **Direct Download** method.  This allows customers to download and run Cado Host independent of running Cado Response.

### Using Script Builder
In order to deploy Cado Host via the Script Builder in the Cado Response platform, follow the instructions below.  Note that when using the Script Builder, the pre-signed URLs and API keys expire 2 hours after being generated. 

:::caution
Ensure that the devices on which the scripts will be run have HTTPS access to the AWS S3 endpoint.  For example: `https://<BUCKET_NAME>.s3.amazonaws.com/`
:::

1. Find the Cado Host deployment options on the platform under `Project > Import > Forensic Artifacts > Cado Host`.

  ![Import Evidence](/img/import.png)

2. Select either **Direct Download** or **Script Builder**.  **Direct Download** can be used if you are downloading the Cado Host binary to your endpoints directly, via Group Policy or via a MDM tool.  **Script Builder** will generate a script that can be run directly on a device via a terminal window, cmd window or remote script execution tool.

	![Select OS, storage, etc](/img/import-step2.png)

3. If you choose the **Script Builder** tab, select your OS, cloud storage (where the Cado Host ZIP will be uploaded to) and then the Cado Host binary deployment method.  

	:::tip
	If you select **Manual** under `Select Cado Host Binary deployment`, download the Cado Host binary to your devices, then copy and paste the command generated for you, into your terminal.
	:::

4. Copy the pre-generated command to the device and run it, or click the "Download Script" button and run that script on the device.

	![Download Script](/img/cado-host-script.png)


### Using Direct Download 
If you choose the **Direct Download** tab, select your OS, click **Download** and then follow the instructions to run Cado Host locally.

![Direct Download](/img/cado-direct-download.png)

## Considerations
​Cado Host is designed to be executed through the commandline. If you do not execute the application with administrative privileges there are some files you will not be able to acquire.

 Cado Host can take parameters from a file (named `config.cfg`) or on the command line.  On Microsoft Windows, if you execute it without the use of the command line, you may be prompted by the Windows SmartScreen. If you wish to run cado-host.exe by manually clicking it, you will have to select Properties and Untick this box:

![Properties](/img/import-security.png)

:::tip
When running on Linux or OSX, you may need to set the binary as executable:

```console
chmod +x ./cado-host
./cado-host
```
:::

:::warning
Version 1.4.0 and later of Cado Host (deployed by 2.5.0 and later of Cado Response) default to a ARM (M1/M2) build of Cado Host when deployed to a MacOS system.
To execute on an older x86 system, append -x86 to the end of the Cado Host URL in the deployment.
I.e. https://cado-public.s3.amazonaws.com/cado-host/v1.4.1/osx/cado-host becomes https://cado-public.s3.amazonaws.com/cado-host/v1.4.1/osx/cado-host-x86
We will be automating the selection of x86 vs ARM in a future release so this will no longer be required.
:::

## Creating Secure Cloud Storage Credentials

:::warning
We now recommend using the automatically created temporary credentials generated by Cado Response.
:::

If you are not using Cado Response, yet still want to automatically store the Cado Host collected data to the cloud, you'll need to create credentials with limited write access to your cloud storage.  

:::caution
It is very important to generate write-only cloud credentials if you will be entering credentials (access and secret keys) on the command line. Ensure that the devices on which the scripts will be run have HTTPS access to the cloud storage URLs as defined below.
:::

To create secure credentials to upload the Cado Host collected data to the cloud, follow the instructions below based on your cloud provider of choice:
- **[Creating Secure Credentials for Azure](azure-credentials)**
- **[Creating Secure Credentials for AWS](aws-credentials)**
- **[Creating Secure Credentials for Google Cloud Storage](google-credentials)**

## Using Local Storage
​If you do not set a cloud storage option, files will be saved to the same folder that Cado Host is run from. You can not set a different storage location at this time.

You can create a `config.cfg` file in the same directory as the Cado Host execuatable which will be used during execution.  If the `config.cfg` file exists, commandline arguments will be ignored.  See **[Using the config.cfg File](#using-the-configcfg-file)** for more details.

### Command Line Parameters

Below are the commandline parameters suppoted by Cado Host.

```
cado-host:
  Cado Host

Usage:
    usage: cado-host.exe [-h] [--presigned_url PRESIGNED_URL] [--storage {google,azure,aws,local}] [--bucket BUCKET]
                     [--access_key ACCESS_KEY] [--secret_key SECRET_KEY] [--region REGION] [-l] [--full_disk]
                     [-o OUTPUT_PATH] [--response_url RESPONSE_URL] [--response_apikey RESPONSE_APIKEY]
                     [--response_project_id RESPONSE_PROJECT_ID] [--presigned_data PRESIGNED_DATA]
                     [-a ADDITIONAL_FILES [ADDITIONAL_FILES ...]]

    optional arguments:
      -h, --help                        Show help message and exit
      --presigned_url <url>             Specify the presigned url you wish to upload files to
      --storage <storage>               Options: google,azure,aws,local
      --bucket <bucket>                 Bucket to upload files to
      --access_key <key>                Access key of your AWS credentials
      --secret_key <key>                Secret Key of your AWS credentials
      --region <region>                 AWS region
      -l, --light_mode                  Enable light_mode where we only retrieve 100mb worth of files
      --full_disk                       Enable full disk acquisition
      -o, --output_path <path>          Output path if running for local storage
      --response_url <url>              URL for Cado Response platform to trigger processing action after host collection. response_apikey must also be provided
      --response_apikey <key>           API Key for Cado Response platform to trigger processing action after host collection. response_url must also be provided
      --response_project_id <id>        Project id in the Cado Response to import the evidence to, default is 1
      --presigned_data <data>           Presigned data used to upload data to the cloud provider
      -a, --additional_files <paths>    ADDITIONAL_FILES [ADDITIONAL_FILES ...]
      --get_windows_memory              Enable windows memory collection - this will cause processing delays
```

### Example Command Line
```console
cado-host.exe --additional_files "C:\tools\secretfile.txt" "C:\SuperSecretFolder"
```

:::tip
Note that folders should NOT have trailing slashes.  Files and folder paths should be delimted by a space and be enclosed in double quotes.
:::

### Using the config.cfg File
​The file `config.cfg` should be in the same current working directory as the cado-host binary.  An example file is shown below:

```
[CORE]
storage = google
light = true

[AWS]
access_key = xxx
secret_key = xxx
bucket = xxx

[GOOGLE]
gcp_access_key = xxx
gcp_secret_key = xxx
gcp_bucket = xxx

[AZURE]
access_signature= xxx
account_name = xxx
container_name = xxx

[LOCAL]
destination_folder = /tmp/ or c:\windows\tmp\
```
