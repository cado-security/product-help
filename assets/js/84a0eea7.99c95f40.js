"use strict";(self.webpackChunkproduct_help=self.webpackChunkproduct_help||[]).push([[5499],{546:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var t=s(5893),a=s(1151);const o={title:"AWS Organizations",hide_title:!0,sidebar_position:4},i="Enabling Cross-Account Access in AWS through AWS Organizations",r={id:"cado-response/deploy/aws/iam/aws-organizations",title:"AWS Organizations",description:'This feature is currently in beta. To enable, go to Settings - Experiments and enable "AWS Organizations Account Discovery"',source:"@site/docs/cado-response/deploy/aws/iam/aws-organizations.md",sourceDirName:"cado-response/deploy/aws/iam",slug:"/cado-response/deploy/aws/iam/aws-organizations",permalink:"/cado-response/deploy/aws/iam/aws-organizations",draft:!1,unlisted:!1,editUrl:"https://github.com/cado-security/product-help/tree/master/docs/cado-response/deploy/aws/iam/aws-organizations.md",tags:[],version:"current",lastUpdatedAt:1711466975,formattedLastUpdatedAt:"Mar 26, 2024",sidebarPosition:4,frontMatter:{title:"AWS Organizations",hide_title:!0,sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Cross Account Creation",permalink:"/cado-response/deploy/aws/iam/cross-account-creation"},next:{title:"Cross Cloud",permalink:"/cado-response/deploy/aws/iam/cross-cloud"}},c={},d=[{value:"Enabling Trusted Access",id:"enabling-trusted-access",level:2},{value:"Entering the role in the Cado UI",id:"entering-the-role-in-the-cado-ui",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"enabling-cross-account-access-in-aws-through-aws-organizations",children:"Enabling Cross-Account Access in AWS through AWS Organizations"}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["This feature is currently in beta. To enable, go to ",(0,t.jsx)(n.em,{children:"Settings - Experiments"}),' and enable "AWS Organizations Account Discovery"']})}),"\n",(0,t.jsxs)(n.p,{children:["An alternative way to enable ",(0,t.jsx)(n.a,{href:"/cado-response/deploy/aws/iam/cross-account-creation",children:"cross-account access"})," for the Cado Platform is to leverage AWS Organizations. This allows you to add and remove access to AWS accounts more easily in environments where accounts are managed by AWS Organizations"]}),"\n",(0,t.jsx)(n.h2,{id:"enabling-trusted-access",children:"Enabling Trusted Access"}),"\n",(0,t.jsx)(n.p,{children:"First, enable the AWS Account Management service in your root account and delegate the service to the account Cado is running in. AWS account Trusted Access must be enabled for AWS Account Management, so the Cado Platform can use the ListAccounts permission."}),"\n",(0,t.jsxs)(n.p,{children:["This setting is found under ",(0,t.jsx)(n.em,{children:"AWS Organizations > Services > AWS Account Management > Enable Trusted Access:"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Enable AWS Account Management",src:s(6043).Z+"",width:"1125",height:"602"})}),"\n",(0,t.jsxs)(n.p,{children:["Once enabled, add a policy for ",(0,t.jsx)(n.code,{children:"ListAccounts"})," under ",(0,t.jsx)(n.em,{children:"AWS Organisation > Settings > Delegated administrator for AWS Organizations:"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Add ListAccounts Policy",src:s(5122).Z+"",width:"1002",height:"607"})}),"\n",(0,t.jsxs)(n.p,{children:["For more information, refer to ",(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/accounts/latest/reference/using-orgs-trusted-access.html",children:"AWS documentation on Enabling trusted access for AWS Account Management"})," and ",(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/accounts/latest/reference/using-orgs-trusted-access.html",children:"AWS Account Management and AWS Organizations"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"An example IAM Policy is as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Sid": "ListAccounts",\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::xxx:root"\n      },\n      "Action": [\n        "organizations:ListAccounts",\n        "organizations:ListTagsForResource"\n      ],\n      "Resource": "*"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"entering-the-role-in-the-cado-ui",children:"Entering the role in the Cado UI"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate in the Cado UI to ",(0,t.jsx)(n.em,{children:"Settings> Cloud Accounts:"})]}),"\n",(0,t.jsxs)(n.li,{children:["Enter the name of the role e.g. ",(0,t.jsx)(n.code,{children:"CadoResponseRole"})," into the AWS Orgs role field."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This will then trigger a pipeline to fetch all of the assumable roles across your AWS accounts where that role name matches the provided value."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"AWS Orgs Settings in Cado",src:s(7373).Z+"",width:"1006",height:"570"})})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},7373:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/aws-orgs-03ad07325db25149ab12df4a069d0dda.png"},6043:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/enable-aws-org-cbcd871cc000d543b7ea5f776a33e2f6.png"},5122:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/listaccounts-policy-a3071422d34f56a5e3da7199ec299661.png"},1151:(e,n,s)=>{s.d(n,{Z:()=>r,a:()=>i});var t=s(7294);const a={},o=t.createContext(a);function i(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);