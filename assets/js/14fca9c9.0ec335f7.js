"use strict";(self.webpackChunkproduct_help=self.webpackChunkproduct_help||[]).push([[6298],{8705:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>m,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var o=t(5893),s=t(1151);const i={title:"Automatically add cross-account access with AWS Organizations (recommended)",hide_title:!0,sidebar_position:3},c="Automatically adding cross-account access with AWS Organizations (Recommended)",a={id:"cado/deploy/aws/iam/aws-organizations",title:"Automatically add cross-account access with AWS Organizations (recommended)",description:'This feature is currently in beta and is the recommended method. To enable it, go to Settings > Experiments and turn on "AWS Organizations Account Discovery."',source:"@site/docs/cado/deploy/aws/iam/aws-organizations.md",sourceDirName:"cado/deploy/aws/iam",slug:"/cado/deploy/aws/iam/aws-organizations",permalink:"/cado/deploy/aws/iam/aws-organizations",draft:!1,unlisted:!1,editUrl:"https://github.com/cado-security/product-help/tree/master/docs/cado/deploy/aws/iam/aws-organizations.md",tags:[],version:"current",lastUpdatedAt:1728730776,formattedLastUpdatedAt:"Oct 12, 2024",sidebarPosition:3,frontMatter:{title:"Automatically add cross-account access with AWS Organizations (recommended)",hide_title:!0,sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Adding Azure and GCP to AWS",permalink:"/cado/deploy/aws/iam/cross-cloud"},next:{title:"IAM permissions description",permalink:"/cado/deploy/aws/iam/iam-description"}},r={},d=[{value:"Permissions: ListAccounts",id:"permissions-listaccounts",level:2},{value:"Example IAM Policy",id:"example-iam-policy",level:3},{value:"Setting Up a Cross-Account IAM Role",id:"setting-up-a-cross-account-iam-role",level:2},{value:"Performing Account Checks",id:"performing-account-checks",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"automatically-adding-cross-account-access-with-aws-organizations-recommended",children:"Automatically adding cross-account access with AWS Organizations (Recommended)"}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["This feature is currently in beta and is the recommended method. To enable it, go to ",(0,o.jsx)(n.em,{children:"Settings > Experiments"}),' and turn on "AWS Organizations Account Discovery."']})}),"\n",(0,o.jsxs)(n.p,{children:["Using AWS Organizations is an alternative, and recommended, way to enable ",(0,o.jsx)(n.a,{href:"/cado/deploy/aws/iam/cross-account-creation",children:"cross-account access"})," for the Cado Platform. This method simplifies managing access to multiple AWS accounts in environments where accounts are organized under AWS Organizations."]}),"\n",(0,o.jsxs)(n.p,{children:["You can view the cross-account role configuration ",(0,o.jsx)(n.a,{href:"https://github.com/cado-security/Deployment-Templates/blob/main/cross-account/CrossAccountPolicy.yaml",children:"here"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"permissions-listaccounts",children:"Permissions: ListAccounts"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/organizations/latest/APIReference/API_ListAccounts.html",children:"ListAccounts"})," operation retrieves a list of all accounts within your organization. It can only be executed from the management account of the AWS Organization."]}),"\n",(0,o.jsxs)(n.p,{children:["In the Cado Platform, you\u2019ll need to choose the role with the ListAccounts permission for the management account. You can do this by selecting the appropriate role from the 'List Accounts Role' dropdown, found in ",(0,o.jsx)(n.em,{children:"Settings > Cloud Accounts"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"example-iam-policy",children:"Example IAM Policy"}),"\n",(0,o.jsx)(n.p,{children:"Here\u2019s an example of an IAM policy for granting the ListAccounts permission:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Sid": "ListAccounts",\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::xxx:root"\n      },\n      "Action": [\n        "organizations:ListAccounts",\n        "organizations:ListTagsForResource"\n      ],\n      "Resource": "*"\n    }\n  ]\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Select List Accounts Role",src:t(7560).Z+"",width:"1320",height:"1140"})}),"\n",(0,o.jsx)(n.h2,{id:"setting-up-a-cross-account-iam-role",children:"Setting Up a Cross-Account IAM Role"}),"\n",(0,o.jsxs)(n.p,{children:["To enable cross-account access, enter the name of your IAM role (e.g., ",(0,o.jsx)(n.code,{children:"CadoResponseRole"}),") in the 'Cross Account IAM Role Name' field."]}),"\n",(0,o.jsx)(n.p,{children:"Then, click 'Discover accounts.' This will trigger a process to identify all AWS accounts where the specified role exists and is assumable."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"AWS Orgs Settings in Cado",src:t(9835).Z+"",width:"1324",height:"1136"})}),"\n",(0,o.jsx)(n.h2,{id:"performing-account-checks",children:"Performing Account Checks"}),"\n",(0,o.jsxs)(n.p,{children:["Once the accounts are added to the Cado platform, it's recommended to regularly run Account Checks to ensure the necessary permissions are still in place for acquisitions. For details on running these checks, refer to ",(0,o.jsx)(n.a,{href:"/cado/manage/monitoring#account-check",children:"Account Check"}),"."]})]})}function m(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},9835:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/aws-orgs-cross-account-iam-role-bd0ce766579f48e4ec657248a088b6b9.png"},7560:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/aws-orgs-list-accounts-role-cc57c94a4fa768d888dddbd88be7e030.png"},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>c});var o=t(7294);const s={},i=o.createContext(s);function c(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);