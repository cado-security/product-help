"use strict";(self.webpackChunkproduct_help=self.webpackChunkproduct_help||[]).push([[6909],{2009:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>c,contentTitle:()=>n,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var t=s(5893),i=s(1151);const r={title:"EKS",hide_title:!0,sidebar_position:5},n="AWS EKS",a={id:"cado-response/discovery-import/import/aws/aws-eks",title:"EKS",description:"The Cado platform will collect key logs and forensic artifacts from AWS EKS containers.",source:"@site/docs/cado-response/discovery-import/import/aws/aws-eks.md",sourceDirName:"cado-response/discovery-import/import/aws",slug:"/cado-response/discovery-import/import/aws/aws-eks",permalink:"/cado-response/discovery-import/import/aws/aws-eks",draft:!1,unlisted:!1,editUrl:"https://github.com/cado-security/product-help/tree/master/docs/cado-response/discovery-import/import/aws/aws-eks.md",tags:[],version:"current",lastUpdatedAt:1704628834,formattedLastUpdatedAt:"Jan 7, 2024",sidebarPosition:5,frontMatter:{title:"EKS",hide_title:!0,sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"ECS",permalink:"/cado-response/discovery-import/import/aws/aws-ecs"},next:{title:"Lambda",permalink:"/cado-response/discovery-import/import/aws/aws-lambda"}},c={},l=[{value:"Import Steps",id:"import-steps",level:2},{value:"EKS RBAC Configuration",id:"eks-rbac-configuration",level:2},{value:"Which IAM role should I use?",id:"which-iam-role-should-i-use",level:3},{value:"The cluster resides in the same account as Cado:",id:"the-cluster-resides-in-the-same-account-as-cado",level:4},{value:"The cluster is deployed in a seperate account from Cado:",id:"the-cluster-is-deployed-in-a-seperate-account-from-cado",level:4}];function d(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h1,{id:"aws-eks",children:"AWS EKS"}),"\n",(0,t.jsx)(o.p,{children:"The Cado platform will collect key logs and forensic artifacts from AWS EKS containers."}),"\n",(0,t.jsx)(o.admonition,{type:"info",children:(0,t.jsxs)(o.p,{children:["Due to the way the Cado platform interacts with Kubernetes, it is not possible to import containers built from a ",(0,t.jsx)(o.a,{href:"https://github.com/GoogleContainerTools/distroless#why-should-i-use-distroless-images",children:"distroless"})," image."]})}),"\n",(0,t.jsx)(o.h2,{id:"import-steps",children:"Import Steps"}),"\n",(0,t.jsxs)(o.ol,{children:["\n",(0,t.jsxs)(o.li,{children:["Go to ",(0,t.jsx)(o.strong,{children:"Import > Cloud"})]}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"Cado Import Screen showing the AWS EKS options",src:s(263).Z+"",width:"842",height:"242"})}),"\n",(0,t.jsxs)(o.ol,{start:"2",children:["\n",(0,t.jsxs)(o.li,{children:["Go through the steps to choose your ",(0,t.jsx)(o.strong,{children:"Cluster"}),", ",(0,t.jsx)(o.strong,{children:"Pod"})," and ",(0,t.jsx)(o.strong,{children:"Container"}),":"]}),"\n"]}),"\n",(0,t.jsx)(o.admonition,{type:"tip",children:(0,t.jsx)(o.p,{children:"When selecting the role in the UI, select the role configured for the account where your EKS cluster resides"})}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"Cado Import Screen showing the available AWS EKS Clusters",src:s(6599).Z+"",width:"1842",height:"563"})}),"\n",(0,t.jsxs)(o.ol,{start:"3",children:["\n",(0,t.jsx)(o.li,{children:"Cado will now automatically collect all the key logs and forensic artifacts from the container to enable an investigation.\nFor a typical acquisition, import and processing will take a few minutes to complete."}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"Cado showing the confirmation screen of a successful AWS EKS container capture",src:s(1574).Z+"",width:"1795",height:"698"})}),"\n",(0,t.jsx)(o.h2,{id:"eks-rbac-configuration",children:"EKS RBAC Configuration"}),"\n",(0,t.jsxs)(o.p,{children:["You'll need to add the appropriate configued Cado IAM role to your EKS RBAC configuration. Without\nthis you will see an error message saying that ",(0,t.jsx)(o.code,{children:"This role is not configured to authorize with this EKS cluster"}),"."]}),"\n",(0,t.jsxs)(o.p,{children:["See ",(0,t.jsx)(o.a,{href:"https://aws.amazon.com/premiumsupport/knowledge-center/eks-api-server-unauthorized-error/",children:"the following AWS guide"}),"\non how to add your role to the EKS RBAC, or if you have eksctl configured, you can use the following command:"]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.code,{children:"eksctl create iamidentitymapping --cluster=<cluster_name> --region=<region> --arn <iam_role> --group <group>"})}),"\n",(0,t.jsxs)(o.p,{children:["You can configure groups by configuring your Kubernetes ",(0,t.jsx)(o.code,{children:"rolebinding"})," or ",(0,t.jsx)(o.code,{children:"clusterrolebinding"})," ConfigMaps. See ",(0,t.jsx)(o.a,{href:"https://docs.aws.amazon.com/eks/latest/userguide/add-user-role.html",children:"the following AWS guide"})," for instructions of manipulating the role maps."]}),"\n",(0,t.jsx)(o.p,{children:"You must also make sure the following IAM permissions are attached to your IAM role:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:'\t"eks:ListClusters",\n\t"eks:DescribeCluster",\n'})}),"\n",(0,t.jsxs)(o.admonition,{type:"info",children:[(0,t.jsx)(o.h3,{id:"which-iam-role-should-i-use",children:"Which IAM role should I use?"}),(0,t.jsx)(o.p,{children:"Depending on where your EKS cluster is deployed, you'll need to choose a different IAM role to configure with the RBAC configuration."}),(0,t.jsx)(o.h4,{id:"the-cluster-resides-in-the-same-account-as-cado",children:"The cluster resides in the same account as Cado:"}),(0,t.jsxs)(o.p,{children:["For a single account import you should  choose the configured role inside ",(0,t.jsx)(o.code,{children:"Settings > Cloud > AWS"}),"."]}),(0,t.jsx)(o.h4,{id:"the-cluster-is-deployed-in-a-seperate-account-from-cado",children:"The cluster is deployed in a seperate account from Cado:"}),(0,t.jsxs)(o.p,{children:["All roles in a chain must be configured with the EKS RBAC. If you're using a different role, then the Cado roles need to also be\nincluded in the RBAC, not just the cross account created in ",(0,t.jsx)(o.a,{href:"/cado-response/deploy/aws/iam/cross-account-creation",children:"AWS Cross Account Creation"}),"."]})]})]})}function h(e={}){const{wrapper:o}={...(0,i.a)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},6599:(e,o,s)=>{s.d(o,{Z:()=>t});const t=s.p+"assets/images/eks2-61bad122854ee7bda7589ab4d9c32e68.png"},1574:(e,o,s)=>{s.d(o,{Z:()=>t});const t=s.p+"assets/images/eks3-fc961c2189e29adc6a2571cacf950e28.png"},263:(e,o,s)=>{s.d(o,{Z:()=>t});const t=s.p+"assets/images/import-c255e755b777d62c8e12f8b312b4f9ea.png"},1151:(e,o,s)=>{s.d(o,{Z:()=>a,a:()=>n});var t=s(7294);const i={},r=t.createContext(i);function n(e){const o=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),t.createElement(r.Provider,{value:o},e.children)}}}]);