"use strict";(self.webpackChunkproduct_help=self.webpackChunkproduct_help||[]).push([[7297],{1865:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>n,metadata:()=>d,toc:()=>a});var i=r(5893),s=r(1151);const n={title:"Deploy with Terraform",hide_title:!0,sidebar_position:2},o="How to deploy with Terraform",d={id:"cado/deploy/aws/terraform",title:"Deploy with Terraform",description:"1. Clone the repo from GitHub.",source:"@site/docs/cado/deploy/aws/terraform.md",sourceDirName:"cado/deploy/aws",slug:"/cado/deploy/aws/terraform",permalink:"/cado/deploy/aws/terraform",draft:!1,unlisted:!1,editUrl:"https://github.com/cado-security/product-help/tree/master/docs/cado/deploy/aws/terraform.md",tags:[],version:"current",lastUpdatedAt:1728665709,formattedLastUpdatedAt:"Oct 11, 2024",sidebarPosition:2,frontMatter:{title:"Deploy with Terraform",hide_title:!0,sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Deploy with Cloudformation",permalink:"/cado/deploy/aws/cloudformation"},next:{title:"Cado architecture in AWS",permalink:"/cado/deploy/aws/architecture"}},l={},a=[{value:"Parameters",id:"parameters",level:2},{value:"Identifying the AMI ID",id:"identifying-the-ami-id",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"how-to-deploy-with-terraform",children:"How to deploy with Terraform"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Clone the repo from ",(0,i.jsx)(t.a,{href:"https://github.com/cado-security/Deployment-Templates/tree/main",children:"GitHub"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Navigate to the root ",(0,i.jsx)(t.strong,{children:"aws_v2"})," folder."]}),"\n",(0,i.jsxs)(t.li,{children:["Adjust the provided ",(0,i.jsx)(t.code,{children:"awsVars.tfvars"})," file, with your deployment configuration."]}),"\n",(0,i.jsxs)(t.li,{children:["Run ",(0,i.jsx)(t.code,{children:"terraform init"})]}),"\n",(0,i.jsxs)(t.li,{children:["Confirm configuration and view deployment plan run ",(0,i.jsx)(t.code,{children:'terraform plan -var-file="awsVars.tfvars"'})]}),"\n",(0,i.jsxs)(t.li,{children:["To deploy run ",(0,i.jsx)(t.code,{children:'terraform apply -var-file="awsVars.tfvars"'}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"PowerShell on Windows cannot correctly pass literal quotes to external programs, so we do not recommend using Terraform with PowerShell when you are on Windows. Use Windows Command Prompt instead."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Parameter Name"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"region"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(choose AWS region)"})}),(0,i.jsxs)(t.td,{children:["AWS Region to deploy the Cado platform in, e.g. ",(0,i.jsx)(t.code,{children:"us-east-1"})]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"key_name"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(choose your keypair)"})}),(0,i.jsx)(t.td,{children:"This key pair is used to enable SSH access to the Cado instance. This is not needed for normal operation, but is helpful should Cado Support ask for additional logs."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"ami_id"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(see below)"})}),(0,i.jsx)(t.td,{children:"Please contact your Cado Sales team for the appropriate AMI ID. When contacting Sales, please provide your AWS Account Number and your AWS region where you will be deploying Cado."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"public_deployment"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(IP vs ALB url)"})}),(0,i.jsx)(t.td,{children:"False by default. Set True if you want the instance to have a public IP address. False hides the Instance behind an ALB with a DNS record to connect to."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"certificate_arn"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(HTTPS certificate ARN)"})}),(0,i.jsxs)(t.td,{children:[(0,i.jsx)(t.em,{children:"Only"})," needed if ",(0,i.jsx)(t.code,{children:"public_deployment"})," is False. The ARN of the certificate to use on the ALB."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"tags"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(Tag resources)"})}),(0,i.jsx)(t.td,{children:"Map of strings. Tag all deployed resources with information to make them easily identifiable."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"vm_size"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(choose vm size)"})}),(0,i.jsx)(t.td,{children:"m5.4xlarge by default."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"vol_size"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(choose disk size)"})}),(0,i.jsx)(t.td,{children:"100 GB by default."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"ssh_location"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(enter ip range)"})}),(0,i.jsx)(t.td,{children:"Enter details of your IP address/ IP address ranges that will be used to connect to SSH services. The IPv4 address range is specified in the CIDR notation e.g. 192.168.0.1/24. It is strongly recommended following the principle of least privilege and restrict this to only those IPs needing SSH access"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"http_location"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(enter ip range)"})}),(0,i.jsx)(t.td,{children:"Enter details of your IP address/ IP address ranges that will be used to connect to HTTPS services. The IPv4 address range is specified in the CIDR notation e.g. 192.168.0.1/24. It is strongly recommended following the principle of least privilege and restrict this to only those IPs needing HTTPS access"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"custom_networking"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(optional custom networking)"})}),(0,i.jsxs)(t.td,{children:["If you want to deploy into already provisioned networking configuration. Cado will not deploy. For ",(0,i.jsx)(t.em,{children:"Public"})," deployments ",(0,i.jsx)(t.code,{children:"vpc_id"})," and ",(0,i.jsx)(t.code,{children:"public_subnet_id"})," must be supplied. For ",(0,i.jsx)(t.em,{children:"Private"})," deployments ",(0,i.jsx)(t.code,{children:"vpc_id"}),", ",(0,i.jsx)(t.code,{children:"public_subnet_id"}),", ",(0,i.jsx)(t.code,{children:"public_subnet_b_id"})," and ",(0,i.jsx)(t.code,{children:"private_subnet_id"})," must be provided."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"proxy"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(URL)"})}),(0,i.jsxs)(t.td,{children:["Proxy URL to use for outbound connections in format / User Pass - ",(0,i.jsx)(t.a,{href:"https://user:pass@1.2.3.4:1234",children:"https://user:pass@1.2.3.4:1234"})]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"proxy_cert_url"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.em,{children:"(URL)"})}),(0,i.jsx)(t.td,{children:"URL to download proxy certificate from, leave blank to use proxy without a cert."})]})]})]}),"\n",(0,i.jsxs)(t.ol,{start:"5",children:["\n",(0,i.jsx)(t.li,{children:"After the infrastructure is built out, there is a one-time initialization that is performed.  In total, the deploy and initialization process should take about 10-15 minutes with Terraform."}),"\n",(0,i.jsxs)(t.li,{children:["You can then ",(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.a,{href:"/cado/deploy/logging-in",children:"Log into Cado"})}),". Note that the initial username is admin and the password is the instance id for the Cado platform.  You'll be asked to change your password after first login."]}),"\n",(0,i.jsx)(t.li,{children:"Lastly, you will need to import a license JSON file."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"identifying-the-ami-id",children:"Identifying the AMI ID"}),"\n",(0,i.jsxs)(t.p,{children:["You can view the AMIs for the latest release ",(0,i.jsx)(t.a,{href:"https://cado-public.s3.amazonaws.com/cado_updates_json_v2.json",children:"here"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,t,r)=>{r.d(t,{Z:()=>d,a:()=>o});var i=r(7294);const s={},n=i.createContext(s);function o(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);