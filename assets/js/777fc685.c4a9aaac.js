"use strict";(self.webpackChunkproduct_help=self.webpackChunkproduct_help||[]).push([[9876],{96090:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var s=n(74848),i=n(28453);const r={title:"AWS EC2 Run Command",hide_title:!0,sidebar_position:11},a="AWS EC2 Run Command",o={id:"cado/discovery-import/aws/run-command",title:"AWS EC2 Run Command",description:"Cado allows you to execute scripts on target systems using the Run Command feature in the import wizard.",source:"@site/docs/cado/discovery-import/aws/run-command.md",sourceDirName:"cado/discovery-import/aws",slug:"/cado/discovery-import/aws/run-command",permalink:"/cado/discovery-import/aws/run-command",draft:!1,unlisted:!1,editUrl:"https://github.com/cado-security/product-help/tree/master/docs/cado/discovery-import/aws/run-command.md",tags:[],version:"current",lastUpdatedAt:1739219399,formattedLastUpdatedAt:"Feb 10, 2025",sidebarPosition:11,frontMatter:{title:"AWS EC2 Run Command",hide_title:!0,sidebar_position:11},sidebar:"tutorialSidebar",previous:{title:"EBS Direct Acquisition",permalink:"/cado/discovery-import/aws/ebs-direct-acquisition"},next:{title:"Azure Compute",permalink:"/cado/discovery-import/azure/azure-compute"}},c={},d=[{value:"Creating a Saved Script",id:"creating-a-saved-script",level:2},{value:"Running the Script",id:"running-the-script",level:2}];function l(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"aws-ec2-run-command",children:"AWS EC2 Run Command"}),"\n",(0,s.jsxs)(t.p,{children:["Cado allows you to execute scripts on target systems using the ",(0,s.jsx)(t.strong,{children:"Run Command"})," feature in the import wizard."]}),"\n",(0,s.jsxs)(t.p,{children:["This requires the ",(0,s.jsx)(t.a,{href:"https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-setting-up-ec2.html",children:"AWS Systems Manager Agent (SSM)"})," to be installed on the instance and admin privileges. To support transferring of files over the SSM port forwarding, we require Python 3.8+ to be installed on the instance."]}),"\n",(0,s.jsxs)(t.p,{children:["To use this feature, you must create a script in ",(0,s.jsx)(t.strong,{children:"/settings/scripts"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"Note: This feature is in Beta. To enable it, go to Settings > Experiments > Run Action."})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"AWS EC2 Run Command",src:n(66203).A+"",width:"1487",height:"702"})}),"\n",(0,s.jsx)(t.h2,{id:"creating-a-saved-script",children:"Creating a Saved Script"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Go to ",(0,s.jsx)(t.strong,{children:"/settings/scripts"})," and click ",(0,s.jsx)(t.strong,{children:"Create Script"}),"."]}),"\n",(0,s.jsx)(t.li,{children:"Choose whether the script will run on Linux or Windows (reduced functionality for Windows). For this example, we\u2019ll choose Linux."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Saved Script",src:n(87872).A+"",width:"3260",height:"858"})}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsxs)(t.li,{children:["In Step 1, provide a ",(0,s.jsx)(t.strong,{children:"Name"})," and ",(0,s.jsx)(t.strong,{children:"Description"})," for the script."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Saved Script - Step 1",src:n(65993).A+"",width:"3804",height:"1082"})}),"\n",(0,s.jsxs)(t.ol,{start:"4",children:["\n",(0,s.jsx)(t.li,{children:"In Step 2, provide the location of the input file (valid S3 URI), which will be downloaded onto the target system. This step is not available for Windows scripts."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Saved Script - Step 2",src:n(25910).A+"",width:"3768",height:"952"})}),"\n",(0,s.jsxs)(t.ol,{start:"5",children:["\n",(0,s.jsx)(t.li,{children:"In Step 3, specify the location of the output file on the target system that will be uploaded to your Cado S3 bucket. This step is not available for Windows scripts."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Saved Script - Step 3",src:n(39199).A+"",width:"3782",height:"950"})}),"\n",(0,s.jsxs)(t.ol,{start:"6",children:["\n",(0,s.jsxs)(t.li,{children:["In Step 4, paste the script that will run on the target system. The input and output files can be referenced as ",(0,s.jsx)(t.code,{children:"${INPUT}"})," and ",(0,s.jsx)(t.code,{children:"${OUTPUT}"})," respectively. Windows scripts do not require these variables."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Example script:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'mkdir -p /tmp/cado-volexity\ncp ${INPUT} /tmp/cado-volexity/surge-collect\nchmod 755 /tmp/cado-volexity/surge-collect\nmkdir -p /tmp/cado-volexity/out\n/tmp/cado-volexity/surge-collect example /tmp/cado-volexity/out\ntar -cvzf /tmp/cado-volexity/out.tar.gz /tmp/cado-volexity/out\ncp "/tmp/cado-volexity/out.tar.gz" ${OUTPUT}\nrm -rf /tmp/cado-volexity\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Saved Script - Step 4",src:n(85988).A+"",width:"1571",height:"591"})}),"\n",(0,s.jsxs)(t.ol,{start:"7",children:["\n",(0,s.jsxs)(t.li,{children:["Click ",(0,s.jsx)(t.strong,{children:"Continue"})," and you\u2019ll see your script listed in the scripts table."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Saved Script - Table",src:n(39885).A+"",width:"3856",height:"704"})}),"\n",(0,s.jsx)(t.h2,{id:"running-the-script",children:"Running the Script"}),"\n",(0,s.jsxs)(t.p,{children:["Use the Import Wizard to select an EC2 instance with the SSM agent installed. Choose ",(0,s.jsx)(t.strong,{children:"Run Command"})," as the action type, and you\u2019ll see the script created earlier. Complete the import as usual."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"AWS EC2 Run Command - Selecting Saved Script",src:n(82106).A+"",width:"2557",height:"766"})})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},66203:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/aws-ec2-runcommand1-6a682e02432fcd47b25e0df8167cf22a.png"},87872:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/aws-ec2-runcommand2-b11e4dc54efaca6f07ebc1e92cb869ff.png"},65993:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/aws-ec2-runcommand3-0e82deea582dd231aac3dce8b07a8311.png"},25910:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/aws-ec2-runcommand4-35fa40b42dafc5e3ae7f4d6edaf8e9ff.png"},39199:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/aws-ec2-runcommand5-8309b0a6ecfa58beffcf97bc2c28a2c8.png"},85988:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/aws-ec2-runcommand6-f3c3ccfbf5847bd5a1c06fb278687fef.png"},39885:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/aws-ec2-runcommand7-3fe3e4fe0b44a67e3d0db7cb22f6c481.png"},82106:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/aws-ec2-runcommand8-59785809f6dbe0694417240d98e31f84.png"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var s=n(96540);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);