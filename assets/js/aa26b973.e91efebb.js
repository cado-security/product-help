"use strict";(self.webpackChunkproduct_help=self.webpackChunkproduct_help||[]).push([[7214],{2092:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var n=t(5893),s=t(1151);const i={title:"Deploying",hide_title:!0,sidebar_position:2},r="Deploying Cado Host",a={id:"cado-host/deploy",title:"Deploying",description:"You can execute Cado Host individually on a device or you can deploy it to a number of machines that may be compromised, for example through Group Policy or other systems management software.",source:"@site/docs/cado-host/deploy.md",sourceDirName:"cado-host",slug:"/cado-host/deploy",permalink:"/cado-host/deploy",draft:!1,unlisted:!1,editUrl:"https://github.com/cado-security/product-help/tree/master/docs/cado-host/deploy.md",tags:[],version:"current",lastUpdatedAt:1703623587,formattedLastUpdatedAt:"Dec 26, 2023",sidebarPosition:2,frontMatter:{title:"Deploying",hide_title:!0,sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Summary",permalink:"/cado-host/intro"},next:{title:"Collected Artifacts",permalink:"/cado-host/artifacts"}},d={},l=[{value:"Deploy through Cado Response Platform",id:"deploy-through-cado-response-platform",level:2},{value:"Using Script Builder",id:"using-script-builder",level:3},{value:"Using Direct Download",id:"using-direct-download",level:3},{value:"Considerations",id:"considerations",level:2},{value:"Creating Secure Cloud Storage Credentials",id:"creating-secure-cloud-storage-credentials",level:2},{value:"Using Local Storage",id:"using-local-storage",level:2},{value:"Command Line Parameters",id:"command-line-parameters",level:3},{value:"Example Command Line",id:"example-command-line",level:3},{value:"Using the config.cfg File",id:"using-the-configcfg-file",level:3}];function c(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.h1,{id:"deploying-cado-host",children:"Deploying Cado Host"}),"\n",(0,n.jsxs)(o.p,{children:["You can execute Cado Host individually on a device or you can deploy it to a number of machines that may be compromised, for example through ",(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.a,{href:"https://support.microsoft.com/en-gb/help/816102/how-to-use-group-policy-to-remotely-install-software-in-windows-server",children:"Group Policy"})})," or other systems management software."]}),"\n",(0,n.jsx)(o.h2,{id:"deploy-through-cado-response-platform",children:"Deploy through Cado Response Platform"}),"\n",(0,n.jsx)(o.p,{children:"In order to deploy Cado Host, you can choose from one of the following deployment methods:"}),"\n",(0,n.jsxs)(o.ol,{children:["\n",(0,n.jsxs)(o.li,{children:["Use the ",(0,n.jsx)(o.strong,{children:"Script Builder"})," from within the Cado Response Platform.  This allows you to build a script which can be run on any supported device, upload the triage artifacts to cloud storage and automatically process the data into Cado Response."]}),"\n",(0,n.jsxs)(o.li,{children:["Use the ",(0,n.jsx)(o.strong,{children:"Direct Download"})," method.  This allows customers to download and run Cado Host independent of running Cado Response."]}),"\n"]}),"\n",(0,n.jsx)(o.h3,{id:"using-script-builder",children:"Using Script Builder"}),"\n",(0,n.jsx)(o.p,{children:"In order to deploy Cado Host via the Script Builder in the Cado Response platform, follow the instructions below.  Note that when using the Script Builder, the pre-signed URLs and API keys expire 2 hours after being generated and AWS enforces a limit of 5GB total upload size."}),"\n",(0,n.jsx)(o.admonition,{type:"caution",children:(0,n.jsxs)(o.p,{children:["Ensure that the devices on which the scripts will be run have HTTPS access to the AWS S3 endpoint.  For example: ",(0,n.jsx)(o.code,{children:"https://<BUCKET_NAME>.s3.amazonaws.com/"})]})}),"\n",(0,n.jsxs)(o.ol,{children:["\n",(0,n.jsxs)(o.li,{children:["Find the Cado Host deployment options on the platform under ",(0,n.jsx)(o.code,{children:"Project > Import > Forensic Artifacts > Cado Host"}),"."]}),"\n"]}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Import Evidence",src:t(263).Z+"",width:"842",height:"242"})}),"\n",(0,n.jsxs)(o.ol,{start:"2",children:["\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsxs)(o.p,{children:["Select either ",(0,n.jsx)(o.strong,{children:"Direct Download"})," or ",(0,n.jsx)(o.strong,{children:"Script Builder"}),".  ",(0,n.jsx)(o.strong,{children:"Direct Download"})," can be used if you are downloading the Cado Host binary to your endpoints directly, via Group Policy or via a MDM tool.  ",(0,n.jsx)(o.strong,{children:"Script Builder"})," will generate a script that can be run directly on a device via a terminal window, cmd window or remote script execution tool."]}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Select OS, storage, etc",src:t(3653).Z+"",width:"1162",height:"836"})}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsxs)(o.p,{children:["If you choose the ",(0,n.jsx)(o.strong,{children:"Script Builder"})," tab, select your OS, cloud storage (where the Cado Host ZIP will be uploaded to) and then the Cado Host binary deployment method."]}),"\n",(0,n.jsx)(o.admonition,{type:"tip",children:(0,n.jsxs)(o.p,{children:["If you select ",(0,n.jsx)(o.strong,{children:"Manual"})," under ",(0,n.jsx)(o.code,{children:"Select Cado Host Binary deployment"}),", download the Cado Host binary to your devices, then copy and paste the command generated for you, into your terminal."]})}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsx)(o.p,{children:'Copy the pre-generated command to the device and run it, or click the "Download Script" button and run that script on the device.'}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Download Script",src:t(288).Z+"",width:"1088",height:"514"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(o.h3,{id:"using-direct-download",children:"Using Direct Download"}),"\n",(0,n.jsxs)(o.p,{children:["If you choose the ",(0,n.jsx)(o.strong,{children:"Direct Download"})," tab, select your OS, click ",(0,n.jsx)(o.strong,{children:"Download"})," and then follow the instructions to run Cado Host locally."]}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Direct Download",src:t(5782).Z+"",width:"460",height:"272"})}),"\n",(0,n.jsx)(o.h2,{id:"considerations",children:"Considerations"}),"\n",(0,n.jsx)(o.p,{children:"\u200bCado Host is designed to be executed through the commandline. If you do not execute the application with administrative privileges there are some files you will not be able to acquire."}),"\n",(0,n.jsxs)(o.p,{children:["Cado Host can take parameters from a file (named ",(0,n.jsx)(o.code,{children:"config.cfg"}),") or on the command line.  On Microsoft Windows, if you execute it without the use of the command line, you may be prompted by the Windows SmartScreen. If you wish to run cado-host.exe by manually clicking it, you will have to select Properties and Untick this box:"]}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Properties",src:t(142).Z+"",width:"388",height:"175"})}),"\n",(0,n.jsxs)(o.admonition,{type:"tip",children:[(0,n.jsx)(o.p,{children:"When running on Linux or OSX, you may need to set the binary as executable:"}),(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-console",children:"chmod +x ./cado-host\n./cado-host\n"})})]}),"\n",(0,n.jsx)(o.admonition,{type:"warning",children:(0,n.jsxs)(o.p,{children:["Version 1.4.0 and later of Cado Host (deployed by 2.5.0 and later of Cado Response) default to a ARM (M1/M2) build of Cado Host when deployed to a MacOS system.\nTo execute on an older x86 system, append -x86 to the end of the Cado Host URL in the deployment.\nI.e. ",(0,n.jsx)(o.a,{href:"https://cado-public.s3.amazonaws.com/cado-host/v1.4.1/osx/cado-host",children:"https://cado-public.s3.amazonaws.com/cado-host/v1.4.1/osx/cado-host"})," becomes ",(0,n.jsx)(o.a,{href:"https://cado-public.s3.amazonaws.com/cado-host/v1.4.1/osx/cado-host-x86",children:"https://cado-public.s3.amazonaws.com/cado-host/v1.4.1/osx/cado-host-x86"}),"\nWe will be automating the selection of x86 vs ARM in a future release so this will no longer be required."]})}),"\n",(0,n.jsx)(o.h2,{id:"creating-secure-cloud-storage-credentials",children:"Creating Secure Cloud Storage Credentials"}),"\n",(0,n.jsx)(o.admonition,{type:"warning",children:(0,n.jsx)(o.p,{children:"We now recommend using the automatically created temporary credentials generated by Cado Response."})}),"\n",(0,n.jsx)(o.p,{children:"If you are not using Cado Response, yet still want to automatically store the Cado Host collected data to the cloud, you'll need to create credentials with limited write access to your cloud storage."}),"\n",(0,n.jsx)(o.admonition,{type:"caution",children:(0,n.jsx)(o.p,{children:"It is very important to generate write-only cloud credentials if you will be entering credentials (access and secret keys) on the command line. Ensure that the devices on which the scripts will be run have HTTPS access to the cloud storage URLs as defined below."})}),"\n",(0,n.jsx)(o.p,{children:"To create secure credentials to upload the Cado Host collected data to the cloud, follow the instructions below based on your cloud provider of choice:"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.a,{href:"azure-credentials",children:"Creating Secure Credentials for Azure"})})}),"\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.a,{href:"aws-credentials",children:"Creating Secure Credentials for AWS"})})}),"\n",(0,n.jsx)(o.li,{children:(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.a,{href:"google-credentials",children:"Creating Secure Credentials for Google Cloud Storage"})})}),"\n"]}),"\n",(0,n.jsx)(o.h2,{id:"using-local-storage",children:"Using Local Storage"}),"\n",(0,n.jsx)(o.p,{children:"\u200bIf you do not set a cloud storage option, files will be saved to the same folder that Cado Host is run from. You can not set a different storage location at this time."}),"\n",(0,n.jsxs)(o.p,{children:["You can create a ",(0,n.jsx)(o.code,{children:"config.cfg"})," file in the same directory as the Cado Host execuatable which will be used during execution.  If the ",(0,n.jsx)(o.code,{children:"config.cfg"})," file exists, commandline arguments will be ignored.  See ",(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.a,{href:"#using-the-configcfg-file",children:"Using the config.cfg File"})})," for more details."]}),"\n",(0,n.jsx)(o.h3,{id:"command-line-parameters",children:"Command Line Parameters"}),"\n",(0,n.jsx)(o.p,{children:"Below are the commandline parameters suppoted by Cado Host."}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"cado-host:\n  Cado Host\n\nUsage:\n    usage: cado-host.exe [-h] [--presigned_url PRESIGNED_URL] [--storage {google,azure,aws,local}] [--bucket BUCKET]\n                     [--access_key ACCESS_KEY] [--secret_key SECRET_KEY] [--region REGION] [-l]\n                     [-o OUTPUT_PATH] [--response_url RESPONSE_URL] [--response_apikey RESPONSE_APIKEY]\n                     [--response_project_id RESPONSE_PROJECT_ID] [--presigned_data PRESIGNED_DATA]\n                     [-a ADDITIONAL_FILES [ADDITIONAL_FILES ...]]\n\n    optional arguments:\n      -h, --help                        Show help message and exit\n      --presigned_url <url>             Specify the presigned url you wish to upload files to\n      --storage <storage>               Options: google,azure,aws,local\n      --bucket <bucket>                 Bucket to upload files to\n      --access_key <key>                Access key of your AWS credentials\n      --secret_key <key>                Secret Key of your AWS credentials\n      --region <region>                 AWS region\n      -l, --light_mode                  Enable light_mode where we only retrieve 100mb worth of files\n      -o, --output_path <path>          Output path if running for local storage\n      --response_url <url>              URL for Cado Response platform to trigger processing action after host collection. response_apikey must also be provided\n      --response_apikey <key>           API Key for Cado Response platform to trigger processing action after host collection. response_url must also be provided\n      --response_project_id <id>        Project id in the Cado Response to import the evidence to, default is 1\n      --presigned_data <data>           Presigned data used to upload data to the cloud provider\n      -a, --additional_files <paths>    ADDITIONAL_FILES [ADDITIONAL_FILES ...]\n      --only_additional_files           Collects only those files specified in the -a or --additional files options. No default files will be collected\n      --get_windows_memory              Enable windows memory collection - this will cause processing delays\n      \n"})}),"\n",(0,n.jsx)(o.h3,{id:"example-command-line",children:"Example Command Line"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-console",children:'cado-host.exe --additional_files "C:\\tools\\secretfile.txt" "C:\\SuperSecretFolder"\n'})}),"\n",(0,n.jsx)(o.admonition,{type:"tip",children:(0,n.jsx)(o.p,{children:"Note that folders should NOT have trailing slashes.  Files and folder paths should be delimted by a space and be enclosed in double quotes."})}),"\n",(0,n.jsx)(o.h3,{id:"using-the-configcfg-file",children:"Using the config.cfg File"}),"\n",(0,n.jsxs)(o.p,{children:["\u200bThe file ",(0,n.jsx)(o.code,{children:"config.cfg"})," should be in the same current working directory as the cado-host binary.  An example file is shown below:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"[CORE]\nstorage = google\nlight = true\n\n[AWS]\naccess_key = xxx\nsecret_key = xxx\nbucket = xxx\n\n[GOOGLE]\ngcp_access_key = xxx\ngcp_secret_key = xxx\ngcp_bucket = xxx\n\n[AZURE]\naccess_signature= xxx\naccount_name = xxx\ncontainer_name = xxx\n\n[LOCAL]\ndestination_folder = /tmp/ or c:\\windows\\tmp\\\n"})})]})}function h(e={}){const{wrapper:o}={...(0,s.a)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},5782:(e,o,t)=>{t.d(o,{Z:()=>n});const n=t.p+"assets/images/cado-direct-download-d110334f50f7736d0958945a66201f71.png"},288:(e,o,t)=>{t.d(o,{Z:()=>n});const n=t.p+"assets/images/cado-host-script-621624bc3f1dd77f5fd7f22a830a9dff.png"},142:(e,o,t)=>{t.d(o,{Z:()=>n});const n=t.p+"assets/images/import-security-856f56febba6db2d8b739dc366096cd4.png"},3653:(e,o,t)=>{t.d(o,{Z:()=>n});const n=t.p+"assets/images/import-step2-f6daa84fd01353ebb44f20dc61f0e1a0.png"},263:(e,o,t)=>{t.d(o,{Z:()=>n});const n=t.p+"assets/images/import-c255e755b777d62c8e12f8b312b4f9ea.png"},1151:(e,o,t)=>{t.d(o,{Z:()=>a,a:()=>r});var n=t(7294);const s={},i=n.createContext(s);function r(e){const o=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(i.Provider,{value:o},e.children)}}}]);