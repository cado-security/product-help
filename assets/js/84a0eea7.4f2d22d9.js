"use strict";(self.webpackChunkproduct_help=self.webpackChunkproduct_help||[]).push([[5499],{546:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>r,contentTitle:()=>c,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var t=s(5893),n=s(1151);const a={title:"Automatically add cross-account access with AWS Organizations (Recommended)",hide_title:!0,sidebar_position:3},c="How to automatically add cross-account access with AWS Organizations (Recommended)",i={id:"cado-response/deploy/aws/iam/aws-organizations",title:"Automatically add cross-account access with AWS Organizations (Recommended)",description:'This feature is now the recommended approach, but is currently in beta. To enable, go to Settings - Experiments and enable "AWS Organizations Account Discovery"',source:"@site/docs/cado-response/deploy/aws/iam/aws-organizations.md",sourceDirName:"cado-response/deploy/aws/iam",slug:"/cado-response/deploy/aws/iam/aws-organizations",permalink:"/cado-response/deploy/aws/iam/aws-organizations",draft:!1,unlisted:!1,editUrl:"https://github.com/cado-security/product-help/tree/master/docs/cado-response/deploy/aws/iam/aws-organizations.md",tags:[],version:"current",lastUpdatedAt:1728400279,formattedLastUpdatedAt:"Oct 8, 2024",sidebarPosition:3,frontMatter:{title:"Automatically add cross-account access with AWS Organizations (Recommended)",hide_title:!0,sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Adding Azure and GCP to AWS",permalink:"/cado-response/deploy/aws/iam/cross-cloud"},next:{title:"IAM permissions description",permalink:"/cado-response/deploy/aws/iam/iam-description"}},r={},d=[{value:"ListAccounts Permission",id:"listaccounts-permission",level:2},{value:"Cross Account IAM Role",id:"cross-account-iam-role",level:2}];function l(e){const o={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,n.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h1,{id:"how-to-automatically-add-cross-account-access-with-aws-organizations-recommended",children:"How to automatically add cross-account access with AWS Organizations (Recommended)"}),"\n",(0,t.jsx)(o.admonition,{type:"tip",children:(0,t.jsxs)(o.p,{children:["This feature is now the recommended approach, but is currently in beta. To enable, go to ",(0,t.jsx)(o.em,{children:"Settings - Experiments"}),' and enable "AWS Organizations Account Discovery"']})}),"\n",(0,t.jsxs)(o.p,{children:["An alternative way to enable ",(0,t.jsx)(o.a,{href:"/cado-response/deploy/aws/iam/cross-account-creation",children:"cross-account access"})," for the Cado Platform is to leverage AWS Organizations. This allows you to add and remove access to AWS accounts more easily in environments where accounts are managed by AWS Organizations."]}),"\n",(0,t.jsxs)(o.p,{children:["You can view the cross-account role ",(0,t.jsx)(o.a,{href:"https://github.com/cado-security/Deployment-Templates/blob/main/cross-account/CrossAccountPolicy.yaml",children:"here"}),"."]}),"\n",(0,t.jsx)(o.h2,{id:"listaccounts-permission",children:"ListAccounts Permission"}),"\n",(0,t.jsxs)(o.p,{children:["The ",(0,t.jsx)(o.a,{href:"https://docs.aws.amazon.com/organizations/latest/APIReference/API_ListAccounts.html",children:"ListAccounts"})," operation lists all the accounts in the organization. This operation can only be called from the organization's management account, therefore select the role that already has the ListAccounts permission on the management account from the 'List Accounts Role' dropdown. This can be accessed from ",(0,t.jsx)(o.em,{children:"Settings> Cloud Accounts"}),"."]}),"\n",(0,t.jsx)(o.p,{children:"An example IAM Policy is as follows:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:'{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Sid": "ListAccounts",\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::xxx:root"\n      },\n      "Action": [\n        "organizations:ListAccounts",\n        "organizations:ListTagsForResource"\n      ],\n      "Resource": "*"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"Select List Accounts Role",src:s(7560).Z+"",width:"1320",height:"1140"})}),"\n",(0,t.jsx)(o.h2,{id:"cross-account-iam-role",children:"Cross Account IAM Role"}),"\n",(0,t.jsxs)(o.p,{children:["Enter the name of the cross account IAM role e.g. ",(0,t.jsx)(o.code,{children:"CadoResponseRole"})," into 'Cross Account IAM Role Name' field."]}),"\n",(0,t.jsx)(o.p,{children:"Select 'Discover accounts' which will then trigger a pipeline to fetch all of the assumable roles across your AWS accounts where that role name matches the provided value."}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"AWS Orgs Settings in Cado",src:s(9835).Z+"",width:"1324",height:"1136"})}),"\n",(0,t.jsxs)(o.p,{children:["After accounts have been added to the Cado platform, it is advisable that Account Checks are performed against roles on a periodic basis, to ensure the correct permissions are in place to perform successful acquisitions. For more information see ",(0,t.jsx)(o.a,{href:"/cado-response/manage/monitoring#account-check",children:"Account Check"}),"."]})]})}function m(e={}){const{wrapper:o}={...(0,n.a)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},9835:(e,o,s)=>{s.d(o,{Z:()=>t});const t=s.p+"assets/images/aws-orgs-cross-account-iam-role-bd0ce766579f48e4ec657248a088b6b9.png"},7560:(e,o,s)=>{s.d(o,{Z:()=>t});const t=s.p+"assets/images/aws-orgs-list-accounts-role-cc57c94a4fa768d888dddbd88be7e030.png"},1151:(e,o,s)=>{s.d(o,{Z:()=>i,a:()=>c});var t=s(7294);const n={},a=t.createContext(n);function c(e){const o=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),t.createElement(a.Provider,{value:o},e.children)}}}]);